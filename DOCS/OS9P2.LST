osm os9p2.txt,+  ,+y

                                      NAM                OS9P2.TXT
                                      OPT                PAG
        0000                          LEN    132
        0000                          INI    29          17 char/inch on OKIDATA
                                      LIB                OS9SRVRQ.TXT

                               *       OS9 service requests

                               *               User mode

      E 0000                   F$LINK equ    $00         link to a memory module
      E 0001                   F$LOAD equ    $01         load module from mass storage
      E 0002                   F$UNLK equ    $02         Unlink a module
      E 0003                   F$FORK equ    $03         Start a new process
      E 0004                   F$WAIT equ    $04         wait for a signal
      E 0005                   F$CHAN equ    $05         chain a process to a new module
      E 0006                   F$EXIT equ    $06         terminate a process
      E 0007                   F$MEM  equ    $07         set memory size
      E 0008                   F$SEND equ    $08         send a signal to a process
      E 0009                   F$ICPT equ    $09         set signal intercept trap
      E 000A                   F$SLEP equ    $0A         suspend process
      E 000C                   F$ID   equ    $0C         return process ID
      E 000D                   F$SPRI equ    $0D         set process priority
      E 000E                   F$SSWI equ    $0E         set software interrupt vector
      E 000F                   F$PERR equ    $0F         print error message
      E 0010                   F$PNAM equ    $10         parse pathlist name
      E 0011                   F$CNAM equ    $11         compare two names
      E 0012                   F$SBIT equ    $12         search a bit map
      E 0013                   F$ABIT equ    $13         allocate a bit map
      E 0014                   F$DBIT equ    $14         deallocate a bit map
      E 0015                   F$TIME equ    $15         return current time
      E 0016                   F$STIM equ    $16         set current time
      E 0017                   F$CRC  equ    $17         generate CRC
      E 0018                   F$GPRD equ    $18         get process descriptor copy
      E 0019                   F$GBLK equ    $19         get system block map copy
      E 001A                   F$GMOD equ    $1A         get module directory copy
      E 001B                   F$CPYM equ    $1B         copy external memory
      E 001C                   F$USER equ    $1C         set user ID number
      E 001D                   F$UNLO equ    $1D         unlink module by name

                               *               system mode privileged

      E 0028                   F$SRQM equ    $28         system memory request
      E 0029                   F$SRTM equ    $29         system memory return
      E 002A                   F$IRQ  equ    $2A         enter IRQ polling table
      E 002B                   F$IOQU equ    $2B         enter I/O queue
      E 002C                   F$APRC equ    $2C         enter active process queue
      E 002D                   F$NPRC equ    $2D         start next process
      E 002E                   F$VMOD equ    $2E         validate module
      E 002F                   F$F64  equ    $2F         find 64 byte memory block
      E 0030                   F$A64  equ    $30         allocate a 64 byte memory block
      E 0031                   F$R64  equ    $31         return a 64 byte memory block
      E 0032                   F$SSVC equ    $32         install a function request (user mode)
      E 0033                   F$IODL equ    $33         delete I/O module
      E 0034                   F$SLIN equ    $34         system link
      E 0035                   F$BOOT equ    $35         bootstrap system
      E 0036                   F$BTME equ    $36         bootstrap memory request
      E 0037                   F$GPRO equ    $37         get process pointer
      E 0038                   F$MOVE equ    $38         move data to different address space
      E 0039                   F$ALLR equ    $39         allocate ram blocks
      E 003A                   F$ALLI equ    $3A         allocate image ram blocks
      E 003B                   F$DELI equ    $3B         deallocate image ram blocks

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     1
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

      E 003C                   F$SETI equ    $3C         set process DAT image
      E 003D                   F$FREL equ    $3D         get free low block
      E 003E                   F$FREH equ    $3E         get free high block
      E 003F                   F$ALLT equ    $3F         allocate process task number
      E 0040                   F$DELT equ    $40         deallocate process task number
      E 0041                   F$SETT equ    $41         set process DAT registers
      E 0042                   F$REST equ    $42         reserve task number
      E 0043                   F$RELT equ    $43         release task number
      E 0044                   F$DATL equ    $44         convert dat block/off to logical address
      E 0045                   F$DATT equ    $45         make temporary dat image
      E 0046                   F$AXY  equ    $46         load A [X,[Y]]
      E 0047                   F$AXYP equ    $47         load A [X+,[Y]]
      E 0048                   F$DXY  equ    $48         load D [D+X, [Y]]
      E 0049                   F$LDAB equ    $49         load A from 0,X in task B
      E 004A                   F$STAB equ    $4A         store A at 0,X in task B
      E 004B                   F$ALLP equ    $4B         allocate process descriptor
      E 004C                   F$DELP equ    $4C         deallocate process descriptor
      E 004D                   F$ELIN equ    $4D         link using module directory entry
      E 004E                   F$FMOD equ    $4E         find module directory entry

                               *        I/O service requests

      E 0080                   I$ATCH equ    $80         Attach I/O device
      E 0081                   I$DTCH equ    $81         Detach I/O device
      E 0082                   I$DUP  equ    $82         duplicate path
      E 0083                   I$CREA equ    $83         create a new file
      E 0084                   I$OPEN equ    $84         open a path to an existing file
      E 0085                   I$MDIR equ    $85         make a directory file
      E 0086                   I$CDIR equ    $86         change working directory
      E 0087                   I$DLET equ    $87         delete a file
      E 0088                   I$SEEK equ    $88         reposition file pointer
      E 0089                   I$READ equ    $89         read data
      E 008A                   I$WRIT equ    $8A         write data
      E 008B                   I$RDLN equ    $8B         read a line
      E 008C                   I$WRLN equ    $8C         write a line
      E 008D                   I$GSTT equ    $8D         get device status
      E 008E                   I$SSTT equ    $8E         set device status
      E 008F                   I$CLOS equ    $8F         close a path
      E 0090                   I$DELX equ    $90         delete a file

                               *               I/O equates

      E 0000                   stdin  equ    0
      E 0001                   stdout equ    1
      E 0002                   stderr equ    2

                               *                module types

      E 0001                   ORDONL equ    $01
      E 0002                   OWRONL equ    $02
      E 0003                   OUPDAT equ    ORDONLY+OWRONLY
      E 0004                   OEXEC  equ    $04
      E 0008                   OPREAD equ    $08
      E 0010                   OPWRIT equ    $10
      E 0020                   OPEXEC equ    $20
      E 0040                   OSHARE equ    $40
      E 0080                   ODIR   equ    $80

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     2
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++



                                      LIB                OS9EQU.TXT
                               *
                               *       Equate file for OS9 page zero data segment
                               *
      E 0001                   Z0001  EQU    $0001
      E 000D                   Z000D  EQU    $000D
      E 0012                   Z0012  EQU    $0012
      E 0013                   Z0013  EQU    $0013
      E 0016                   Z0016  EQU    $0016
      E 0020                   Z0020  EQU    $0020
      E 0022                   Z0022  EQU    $0022
      E 0024                   Z0024  EQU    $0024
      E 0026                   Z0026  EQU    $0026
      E 0028                   Z0028  EQU    $0028
      E 002A                   Z002A  EQU    $002A
      E 002C                   Z002C  EQU    $002C
      E 002E                   Z002E  EQU    $002E
      E 0030                   Z0030  EQU    $0030
      E 0032                   Z0032  EQU    $0032
      E 0034                   Z0034  EQU    $0034
      E 0036                   Z0036  EQU    $0036
      E 0038                   Z0038  EQU    $0038
      E 003A                   Z003A  EQU    $003A
      E 003C                   Z003C  EQU    $003C
      E 003E                   Z003E  EQU    $003E
      E 003F                   Z003F  EQU    $003F
      E 0040                   Z0040  EQU    $0040
      E 0041                   Z0041  EQU    $0041
      E 0042                   Z0042  EQU    $0042
      E 0043                   Z0043  EQU    $0043
      E 0044                   Z0044  EQU    $0044
      E 0046                   Z0046  EQU    $0046
      E 0048                   Z0048  EQU    $0048
      E 0049                   Z0049  EQU    $0049
      E 004B                   Z004B  EQU    $004B
      E 004D                   Z004D  EQU    $004D
      E 004F                   Z004F  EQU    $004F
      E 0051                   Z0051  EQU    $0051
      E 0053                   Z0053  EQU    $0053
      E 0055                   Z0055  EQU    $0055
      E 0057                   Z0057  EQU    $0057
      E 005B                   Z005B  EQU    $005B
      E 0066                   Z0066  EQU    $0066
      E 0068                   Z0068  EQU    $0068
      E 0073                   Z0073  EQU    $0073

      E 0800                   Z0800  EQU    $0800

      E E014                   ZE014  EQU    $E014

      E 00C0                   sys    EQU    $C0
      E 0001                   objct  EQU    $01
      E 0080                   reent  EQU    $80

      E F800                   P1base EQU    $F800

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     3
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

      E F000                   P2base EQU    $F000

      E 87CD                   MODHD  EQU    $87CD



OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     4
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++



      S 0000 87 CD 04 FB              mod    ZF4FC,ZF00D,sys+objct,reent+1,ZF041,0
        0004 00 0D C1 81 07 00 41 00 00

      C 000D 4F 53 39 70       ZF00D  fcs    "OS9p2"
        0011 B2
      C 0012 09                       fcb    $09

      C 0013 7F                ZF013  FCB    $7F
      C 0014 0481                     FDB    ZF497-ZF016 $0481
      C 0016 02                ZF016  FCB    $02
      C 0017 0098                     FDB    ZF0B2-ZF019 $0099
      C 0019 04                ZF019  FCB    $04
      C 001A 00DE                     FDB    ZF0FB-ZF01C $00DF
      C 001C 06                ZF01C  FCB    $06
      C 001D 0129                     FDB    ZF149-ZF01F $012A
      C 001F 07                ZF01F  FCB    $07
      C 0020 01A4                     FDB    ZF1C7-ZF022 $01A5
      C 0022 08                ZF022  FCB    $08
      C 0023 0217                     FDB    ZF23D-ZF025 $0218
      C 0025 0A                ZF025  FCB    $0A
      C 0026 029F                     FDB    ZF2C8-ZF028 $02A0
      C 0028 09                ZF028  FCB    $09
      C 0029 032A                     FDB    ZF355-ZF02B $032A
      C 002B 0C                ZF02B  FCB    $0C
      C 002C 0350                     FDB    ZF37E-ZF02E $0350
      C 002E 0D                ZF02E  FCB    $0D
      C 002F 0332                     FDB    ZF363-ZF031 $0332
      C 0031 0E                ZF031  FCB    $0E
      C 0032 0356                     FDB    ZF38A-ZF034 $0356
      C 0034 16                ZF034  FCB    $16
      C 0035 036E                     FDB    ZF3A5-ZF037 $036E
      C 0037 AF                ZF037  FCB    $AF
      C 0038 0387                     FDB    ZF3C1-ZF03A $0387
      C 003A B0                ZF03A  FCB    $B0
      C 003B 03A7                     FDB    ZF3E4-ZF03D $03A7
      C 003D B1                ZF03D  FCB    $B1
      C 003E 0425                     FDB    ZF465-ZF040 $0425
      C 0040 80                ZF040  FCB    $80

        0041   31 8C   CF 0013 ZF041  LEAY   ZF013,PCR   get address of srvc req init table
      S 0044 103F      32             OS9    F$SSVC      install function service request
        0047   9E      49             LDX    Z0049       get base address of page table
      S 0049 103F      30             OS9    F$A64       Allocate a 64 byte memory block
        004C   25      32 0080        BCS    ZF081       branch on error

        004E   9F      49             STX    Z0049       save base address of page table
        0050 109F      4B             STY    Z004B       save address of block
        0053   1F      40             TFR    S,D
        0055   4A                     DECA               
        0056   C6      01             LDB    #$01
        0058   ED 27                  STD    $07,Y
        005A   86      80             LDA    #$80
        005C   A7 2D                  STA    $0D,Y
        005E   DE      2A             LDU    Z002A
        0060   8D      22 0084        BSR    ZF085

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     5
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0062   24      05 0069        BCC    ZF06A
        0064   17    0453 04BA        LBSR   ZF4BB
        0067   8D      1B 0084        BSR    ZF085

        0069   8D      27 0092 ZF06A  BSR    ZF093
        006B   24      05 0072        BCC    ZF073
        006D   17    044A 04BA        LBSR   ZF4BB
        0070   8D      20 0092        BSR    ZF093

        0072   EC 4E           ZF073  LDD    $0E,U       get pointer to relative pointer
        0074   30 CB                  LEAX   D,U         set address of module name or filename
        0076   86      01             LDA    #$01        set type/language code = program module
        0078   5F                     CLRB               set optional data area size
        0079 108E    0000             LDY    #$0000      set parameter area size
      S 007D 103F      05             OS9    F$CHAN      load and execute a new primary module

      W 0080   6E 9F FFFE      ZF081  JMP    [$FFFE]

        0084   5F              ZF085  CLRB               
        0085   EC C8   10             LDD    $10,U       get relative pointer
        0088   27      07 0091        BEQ    ZF092
        008A   30 CB                  LEAX   D,U         get address of pathlist
        008C   86      05             LDA    #$05        set access mode = execute and read
      S 008E 103F      86             OS9    I$CDIR      change working directory

        0091   39              ZF092  RTS                

        0092   5F              ZF093  CLRB               
        0093   EC C8   12             LDD    $12,U       point D to address of pathlist
        0096   30 CB                  LEAX   D,U         get address of pathlist
        0098   86      03             LDA    #$03        set access mode = write and read
      S 009A 103F      84             OS9    I$OPEN      open the path
        009D   25      11 00B0        BCS    ZF0B1

        009F   9E      4B             LDX    Z004B
        00A1   A7 88   26             STA    $26,X       set path number of path to duplicate
      S 00A4 103F      82             OS9    I$DUP       duplicate pathlist
        00A7   A7 88   27             STA    $27,X       set path number of path to duplicate
      S 00AA 103F      82             OS9    I$DUP       duplicate pathlist
        00AD   A7 88   28             STA    $28,X
        00B0   39              ZF0B1  RTS                

        00B1   EC 48           ZF0B2  LDD    $08,U
        00B3   27      43 00F8        BEQ    ZF0F9
        00B5   9E      26             LDX    Z0026

        00B7 10A3 84           ZF0B8  CMPD   ,X
        00BA   27      08 00C4        BEQ    ZF0C5
        00BC   30 04                  LEAX   $04,X
        00BE   9C      28             CMPX   Z0028
        00C0   25      F5 00B7        BCS    ZF0B8
        00C2   20      34 00F8        BRA    ZF0F9

        00C4   A6 02           ZF0C5  LDA    $02,X
        00C6   27      05 00CD        BEQ    ZF0CE
        00C8   4A                     DECA               
        00C9   A7 02                  STA    $02,X

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     6
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        00CB   26      2B 00F8        BNE    ZF0F9

        00CD 10AE 84           ZF0CE  LDY    ,X
        00D0 109C      66             CMPY   Z0066
        00D3   24      23 00F8        BCC    ZF0F9

        00D5   E6 26                  LDB    $06,Y
        00D7   C1      D0             CMPB   #$D0
        00D9   25      09 00E4        BCS    ZF0E5

      S 00DB 103F      33             OS9    F$IODL      delete I/O module
        00DE   24      04 00E4        BCC    ZF0E5
        00E0   6C 02                  INC    $02,X
        00E2   20      15 00F9        BRA    ZF0FA

        00E4   4F              ZF0E5  CLRA               
        00E5   5F                     CLRB               
        00E6   ED 84                  STD    ,X
        00E8   ED A4                  STD    ,Y
        00EA   EC 22                  LDD    $02,Y
        00EC   17    0146 0235        LBSR   ZF236
        00EF   1E      02             EXG    D,Y
        00F1   1E      89             EXG    A,B
        00F3   9E      20             LDX    Z0020
      S 00F5 103F      14             OS9    F$DBIT      deallocate in a bit map
        00F8   4F              ZF0F9  CLRA               
        00F9   39              ZF0FA  RTS                

        00FA 109E      4B      ZF0FB  LDY    Z004B
        00FD   9E      49             LDX    Z0049
        00FF   A6 23                  LDA    $03,Y
        0101   26      04 0107        BNE    ZF108
        0103   53                     COMB               
        0104   C6      E2             LDB    #$E2
        0106   39                     RTS                

      S 0107 103F      2F      ZF108  OS9    F$F64       find a 64 byte memory block
        010A   A6 2D                  LDA    $0D,Y
        010C   85      01             BITA   #$01
        010E   26      13 0123        BNE    ZF124

        0110   A6 22                  LDA    $02,Y
        0112   26      F3 0107        BNE    ZF108

        0114   6F 41                  CLR    $01,U
        0116   9E      4B             LDX    Z004B
        0118   1A      50             ORCC   #$50
        011A   DC      4F             LDD    Z004F
        011C   ED 0E                  STD    $0E,X
        011E   9F      4F             STX    Z004F
        0120   16    0217 033A        LBRA   ZF33B

        0123   9E      4B      ZF124  LDX    Z004B

        0125   A6 A4           ZF126  LDA    ,Y
        0127   E6 A8   36             LDB    $36,Y
        012A   ED 41                  STD    $01,U

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     7
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        012C   34      72             PSHS   U,Y,X,A
        012E   31 01                  LEAY   $01,X
        0130   9E      49             LDX    Z0049
        0132   20      03 0137        BRA    ZF138

      S 0134 103F      2F      ZF135  OS9    F$F64       find a 64 byte memory block

        0137   A6 22           ZF138  LDA    $02,Y
        0139   A1 E4                  CMPA   ,S
        013B   26      F7 0134        BNE    ZF135

        013D   EE 63                  LDU    $03,S
        013F   E6 42                  LDB    $02,U
        0141   E7 22                  STB    $02,Y
      S 0143 103F      31             OS9    F$R64       return a 64 byte memory block
        0146   35      F2             PULS   PC,U,Y,X,A

        0148   9E      4B      ZF149  LDX    Z004B
        014A   E6 42                  LDB    $02,U
        014C   E7 88   36             STB    $36,X
        014F   C6      10             LDB    #$10
        0151   31 88   26             LEAY   $26,X

        0154   A6 A0           ZF155  LDA    ,Y+
        0156   27      07 015F        BEQ    ZF160

        0158   34      04             PSHS   B
      S 015A 103F      8F             OS9    I$CLOS      close a path
        015D   35      04             PULS   B

        015F   5A              ZF160  DECB               
        0160   26      F2 0154        BNE    ZF155

        0162   A6 07                  LDA    $07,X
        0164   1F      03             TFR    D,U
        0166   A6 08                  LDA    $08,X
      S 0168 103F      29             OS9    F$SRTM      return system memory
        016B   EE 88   12             LDU    $12,X
      S 016E 103F      02             OS9    F$UNLK      unlink a module
        0171   DE      4B             LDU    Z004B
        0173   31 41                  LEAY   $01,U
        0175   9E      49             LDX    Z0049
        0177   20      12 018B        BRA    ZF18C

        0179   6F 22           ZF17A  CLR    $02,Y
      S 017B 103F      2F             OS9    F$F64       find a 64 byte memory block
        017E   A6 2D                  LDA    $0D,Y
        0180   85      01             BITA   #$01
        0182   27      05 0189        BEQ    ZF18A
        0184   A6 A4                  LDA    ,Y
        0186 103F                     SWI2               
      C 0188 31                       FCB    $31

        0189   6F 21           ZF18A  CLR    $01,Y

        018B   A6 22           ZF18C  LDA    $02,Y
        018D   26      EA 0179        BNE    ZF17A

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     8
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        018F   8E    0041             LDX    #Z0041
        0192   A6 41                  LDA    $01,U
        0194   26      0D 01A3        BNE    ZF1A4
        0196   9E      49             LDX    Z0049
        0198   A6 C4                  LDA    ,U
        019A 103F                     SWI2               
      C 019C 31                       FCB    $31
        019D   20      22 01C1        BRA    ZF1C2

        019F   A1 84           ZF1A0  CMPA   ,X
        01A1   27      0E 01B1        BEQ    ZF1B2

        01A3   31 84           ZF1A4  LEAY   ,X
        01A5   AE 0E                  LDX    $0E,X
        01A7   26      F6 019F        BNE    ZF1A0
        01A9   A6 4D                  LDA    $0D,U
        01AB   8A      01             ORA    #$01
        01AD   A7 4D                  STA    $0D,U
        01AF   20      10 01C1        BRA    ZF1C2

        01B1   EC 0E           ZF1B2  LDD    $0E,X
        01B3   ED 2E                  STD    $0E,Y
        01B5 103F                     SWI2               
      C 01B7 2C                       FCB    $2C
        01B8   31 C4                  LEAY   ,U
        01BA   EE 04                  LDU    $04,X
        01BC   EE 41                  LDU    $01,U
        01BE   17    FF64 0125        LBSR   ZF126

        01C1   4F              ZF1C2  CLRA               
        01C2   5F                     CLRB               
        01C3   DD      4B             STD    Z004B
        01C5   39                     RTS                

        01C6   9E      4B      ZF1C7  LDX    Z004B
        01C8   EC 41                  LDD    $01,U
        01CA   27      5A 0226        BEQ    ZF227
        01CC   8D      67 0235        BSR    ZF236
        01CE   E0 08                  SUBB   $08,X
        01D0   27      54 0226        BEQ    ZF227
        01D2   25      32 0206        BCS    ZF207
        01D4   1F      02             TFR    D,Y
        01D6   AE 07                  LDX    $07,X
        01D8   34      70             PSHS   U,Y,X
        01DA   E6 E4                  LDB    ,S
        01DC   27      02 01E0        BEQ    ZF1E1
        01DE   EB 61                  ADDB   $01,S

        01E0   9E      20      ZF1E1  LDX    Z0020
        01E2   DE      22             LDU    Z0022
        01E4 103F                     SWI2               
      C 01E6 12                       FCB    $12
        01E7   25      47 0230        BCS    ZF231
        01E9   E7 62                  STB    $02,S
        01EB   E6 E4                  LDB    ,S
        01ED   27      06 01F5        BEQ    ZF1F6
        01EF   EB 61                  ADDB   $01,S

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE     9
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        01F1   E1 62                  CMPB   $02,S
        01F3   26      3B 0230        BNE    ZF231

        01F5   E6 62           ZF1F6  LDB    $02,S
        01F7 103F                     SWI2               
      C 01F9 13                       FCB    $13
        01FA   EC 62                  LDD    $02,S
        01FC   A0 61                  SUBA   $01,S
        01FE   EB 61                  ADDB   $01,S
        0200   35      70             PULS   U,Y,X
        0202   9E      4B             LDX    Z004B
        0204   20      1E 0224        BRA    ZF225

        0206   50              ZF207  NEGB               
        0207   1F      02             TFR    D,Y
        0209   50                     NEGB               
        020A   EB 08                  ADDB   $08,X
        020C   EB 07                  ADDB   $07,X
        020E   E1 04                  CMPB   $04,X
        0210   22      04 0216        BHI    ZF217
        0212   53                     COMB               
        0213   C6      DF             LDB    #$DF
        0215   39                     RTS                

        0216   9E      20      ZF217  LDX    Z0020
        0218 103F                     SWI2               
      C 021A 14                       FCB    $14
        021B   1F      20             TFR    Y,D
        021D   50                     NEGB               
        021E   9E      4B             LDX    Z004B
        0220   EB 08                  ADDB   $08,X
        0222   A6 07                  LDA    $07,X

        0224   ED 07           ZF225  STD    $07,X

        0226   A6 08           ZF227  LDA    $08,X
        0228   5F                     CLRB               
        0229   ED 41                  STD    $01,U
        022B   AB 07                  ADDA   $07,X
        022D   ED 46                  STD    $06,U
        022F   39                     RTS                

        0230   53              ZF231  COMB               
        0231   C6      CF             LDB    #$CF
        0233   35      F0             PULS   PC,U,Y,X

        0235   C3    00FF      ZF236  ADDD   #$00FF
        0238   5F                     CLRB               
        0239   1E      89             EXG    A,B
        023B   39                     RTS                

        023C   A6 41           ZF23D  LDA    $01,U
        023E   26      0E 024E        BNE    ZF24F
        0240   4C                     INCA               

        0241   9E      4B      ZF242  LDX    Z004B
        0243   A1 84                  CMPA   ,X

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    10
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0245   27      02 0249        BEQ    ZF24A
        0247   8D      05 024E        BSR    ZF24F

        0249   4C              ZF24A  INCA               
        024A   26      F5 0241        BNE    ZF242
        024C   5F                     CLRB               
        024D   39                     RTS                

        024E   9E      49      ZF24F  LDX    Z0049
        0250 103F                     SWI2               
      C 0252 2F                       FCB    $2F
        0253   24      03 0258        BCC    ZF259
        0255   C6      E0             LDB    #$E0
        0257   39                     RTS                

        0258   1A      50      ZF259  ORCC   #$50
        025A   34      22             PSHS   Y,A
        025C   E6 42                  LDB    $02,U
        025E   26      06 0266        BNE    ZF267
        0260   A6 2D                  LDA    $0D,Y
        0262   8A      02             ORA    #$02
        0264   A7 2D                  STA    $0D,Y

        0266   A6 A8   36      ZF267  LDA    $36,Y
        0269   27      08 0273        BEQ    ZF274
        026B   4A                     DECA               
        026C   27      05 0273        BEQ    ZF274
        026E   53                     COMB               
        026F   C6      E9             LDB    #$E9
        0271   35      A2             PULS   PC,Y,A

        0273   E7 A8   36      ZF274  STB    $36,Y
        0276   8E    0043             LDX    #Z0043
        0279   20      26 02A1        BRA    ZF2A2

        027B   AC 61           ZF27C  CMPX   $01,S
        027D   26      22 02A1        BNE    ZF2A2
        027F   A6 0D                  LDA    $0D,X
        0281   85      40             BITA   #$40
        0283   27      2F 02B4        BEQ    ZF2B5
        0285   EE 04                  LDU    $04,X
        0287   EC 44                  LDD    $04,U
        0289   27      29 02B4        BEQ    ZF2B5
        028B   EE 0E                  LDU    $0E,X
        028D   27      25 02B4        BEQ    ZF2B5
        028F   34      06             PSHS   B,A
        0291   A6 4D                  LDA    $0D,U
        0293   85      40             BITA   #$40
        0295   35      06             PULS   B,A
        0297   27      1B 02B4        BEQ    ZF2B5
        0299   EE 44                  LDU    $04,U
        029B   E3 44                  ADDD   $04,U
        029D   ED 44                  STD    $04,U
        029F   20      13 02B4        BRA    ZF2B5

        02A1   31 84           ZF2A2  LEAY   ,X
        02A3   AE 2E                  LDX    $0E,Y

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    11
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        02A5   26      D4 027B        BNE    ZF27C
        02A7   8E    0041             LDX    #Z0041

        02AA   31 84           ZF2AB  LEAY   ,X
        02AC   AE 2E                  LDX    $0E,Y
        02AE   27      14 02C4        BEQ    ZF2C5
        02B0   AC 61                  CMPX   $01,S
        02B2   26      F6 02AA        BNE    ZF2AB

        02B4   EC 0E           ZF2B5  LDD    $0E,X
        02B6   ED 2E                  STD    $0E,Y
        02B8   A6 88   36             LDA    $36,X
        02BB   4A                     DECA               
        02BC   26      03 02C1        BNE    ZF2C2
        02BE   A7 88   36             STA    $36,X

        02C1 103F              ZF2C2  SWI2               
      C 02C3 2C                       FCB    $2C

        02C4   5F              ZF2C5  CLRB               
        02C5   35      A2             PULS   PC,Y,A

        02C7   9E      4B      ZF2C8  LDX    Z004B
        02C9   1A      50             ORCC   #$50
        02CB   A6 88   36             LDA    $36,X
        02CE   27      0B 02DB        BEQ    ZF2DC
        02D0   4A                     DECA               
        02D1   26      03 02D6        BNE    ZF2D7
        02D3   A7 88   36             STA    $36,X

        02D6 103F              ZF2D7  SWI2               
      C 02D8 2C                       FCB    $2C
        02D9   20      5F 033A        BRA    ZF33B

        02DB   EC 44           ZF2DC  LDD    $04,U
        02DD   27      48 0327        BEQ    ZF328
        02DF   83    0001             SUBD   #$0001
        02E2   ED 44                  STD    $04,U
        02E4   27      F0 02D6        BEQ    ZF2D7
        02E6   34      50             PSHS   U,X
        02E8   8E    0043             LDX    #Z0043

        02EB   31 84           ZF2EC  LEAY   ,X
        02ED   AE 0E                  LDX    $0E,X
        02EF   27      12 0303        BEQ    ZF304
        02F1   34      06             PSHS   B,A
        02F3   A6 0D                  LDA    $0D,X
        02F5   85      40             BITA   #$40
        02F7   35      06             PULS   B,A
        02F9   27      08 0303        BEQ    ZF304
        02FB   EE 04                  LDU    $04,X
        02FD   A3 44                  SUBD   $04,U
        02FF   24      EA 02EB        BCC    ZF2EC
        0301   E3 44                  ADDD   $04,U

        0303   35      50      ZF304  PULS   U,X
        0305   ED 44                  STD    $04,U

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    12
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0307   EC 2E                  LDD    $0E,Y
        0309   AF 2E                  STX    $0E,Y
        030B   ED 0E                  STD    $0E,X
        030D   A6 0D                  LDA    $0D,X
        030F   8A      40             ORA    #$40
        0311   A7 0D                  STA    $0D,X
        0313   AE 0E                  LDX    $0E,X
        0315   27      23 033A        BEQ    ZF33B
        0317   A6 0D                  LDA    $0D,X
        0319   85      40             BITA   #$40
        031B   27      1D 033A        BEQ    ZF33B
        031D   AE 04                  LDX    $04,X
        031F   EC 04                  LDD    $04,X
        0321   A3 44                  SUBD   $04,U
        0323   ED 04                  STD    $04,X
        0325   20      13 033A        BRA    ZF33B

        0327   A6 0D           ZF328  LDA    $0D,X
        0329   84      BF             ANDA   #$BF
        032B   A7 0D                  STA    $0D,X
        032D   CC    0043             LDD    #$0043

        0330   1F      02      ZF331  TFR    D,Y
        0332   EC 2E                  LDD    $0E,Y
        0334   26      FA 0330        BNE    ZF331
        0336   AF 2E                  STX    $0E,Y
        0338   ED 0E                  STD    $0E,X

        033A   31 8D 0011 034F ZF33B  LEAY   ZF34F,PCR
        033E   34      20             PSHS   Y
        0340 109E      4B             LDY    Z004B
        0343   EC 24                  LDD    $04,Y
        0345   AE 44                  LDX    $04,U
        0347   34      7F             PSHS   U,Y,X,DP,B,A,CC
        0349 10EF 24                  STS    $04,Y
        034C 103F                     SWI2               
      C 034E 2D                       FCB    $2D

        034F   ED 24           ZF34F  STD    $04,Y
        0351   AF 44                  STX    $04,U
        0353   5F                     CLRB               
        0354   39                     RTS                

        0355   9E      4B      ZF355  LDX    Z004B
        0357   EC 44                  LDD    $04,U
        0359   ED 88   37             STD    $37,X
        035C   EC 48                  LDD    $08,U
        035E   ED 88   39             STD    $39,X
        0361   5F                     CLRB               
        0362   39                     RTS                

        0363   A6 41           ZF363  LDA    $01,U
        0365   9E      49             LDX    Z0049
        0367 103F                     SWI2               
      C 0369 2F                       FCB    $2F
        036A   25      0E 037A        BCS    ZF37A
        036C   9E      4B             LDX    Z004B

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    13
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        036E   EC 09                  LDD    $09,X
        0370 10A3 29                  CMPD   $09,Y
        0373   26      05 037A        BNE    ZF37A
        0375   A6 42                  LDA    $02,U
        0377   A7 2B                  STA    $0B,Y
        0379   39                     RTS                

        037A   53              ZF37A  COMB               
        037B   C6      E0             LDB    #$E0
        037D   39                     RTS                

        037E   9E      4B      ZF37E  LDX    Z004B
        0380   A6 84                  LDA    ,X
        0382   A7 41                  STA    $01,U
        0384   EC 09                  LDD    $09,X
        0386   ED 46                  STD    $06,U
        0388   5F                     CLRB               
        0389   39                     RTS                

        038A   9E      4B      ZF38A  LDX    Z004B
        038C   31 88   14             LEAY   $14,X
        038F   E6 41                  LDB    $01,U
        0391   5A                     DECB               
        0392   C1      03             CMPB   #$03
        0394   24      06 039C        BCC    ZF39C
        0396   58                     ASLB               
        0397   AE 44                  LDX    $04,U
        0399   AF A5                  STX    B,Y
        039B   39                     RTS                

        039C   53              ZF39C  COMB               
        039D   C6      E3             LDB    #$E3
        039F   39                     RTS                

      C 03A0 43 6C 6F 63       ZF3A0  FCS    "Clock"
        03A4 EB
        03A5   AE 44           ZF3A5  LDX    $04,U
        03A7   EC 84                  LDD    ,X
        03A9   DD      53             STD    Z0053
        03AB   EC 02                  LDD    $02,X
        03AD   DD      55             STD    Z0055
        03AF   EC 04                  LDD    $04,X
        03B1   DD      57             STD    Z0057
        03B3   86      C1             LDA    #$C1
        03B5   30 8C   E8 03A0        LEAX   ZF3A0,PCR
        03B8 103F                     SWI2               
      C 03BA 00                       FCB    $00
        03BB   25      03 03C0        BCS    ZF3C0
        03BD   6E A4                  JMP    ,Y
        03BF   5F                     CLRB               

        03C0   39              ZF3C0  RTS                

        03C1   A6 41           ZF3C1  LDA    $01,U
        03C3   AE 44                  LDX    $04,U
        03C5   8D      06 03CD        BSR    ZF3CD
        03C7   25      03 03CC        BCS    ZF3CC

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    14
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        03C9 10AF 46                  STY    $06,U

        03CC   39              ZF3CC  RTS                

        03CD   34      06      ZF3CD  PSHS   B,A
        03CF   4D                     TSTA               
        03D0   27      0F 03E1        BEQ    ZF3E1
        03D2   5F                     CLRB               
        03D3   44                     LSRA               
        03D4   56                     RORB               
        03D5   44                     LSRA               
        03D6   56                     RORB               
        03D7   A6 86                  LDA    A,X
        03D9   1F      02             TFR    D,Y
        03DB   27      04 03E1        BEQ    ZF3E1
        03DD   6D A4                  TST    ,Y
        03DF   26      01 03E2        BNE    ZF3E2

        03E1   43              ZF3E1  COMA               

        03E2   35      86      ZF3E2  PULS   PC,B,A

        03E4   AE 44           ZF3E4  LDX    $04,U
        03E6   26      08 03F0        BNE    ZF3F0
        03E8   8D      10 03FA        BSR    ZF3FA
        03EA   25      0D 03F9        BCS    ZF3F9
        03EC   AF 84                  STX    ,X
        03EE   AF 44                  STX    $04,U

        03F0   8D      1E 0410 ZF3F0  BSR    ZF410
        03F2   25      05 03F9        BCS    ZF3F9
        03F4   A7 41                  STA    $01,U
        03F6 10AF 46                  STY    $06,U

        03F9   39              ZF3F9  RTS                

        03FA   34      40      ZF3FA  PSHS   U
        03FC   CC    0100             LDD    #$0100
        03FF 103F                     SWI2               
      C 0401 28                       FCB    $28
        0402   30 C4                  LEAX   ,U
        0404   35      40             PULS   U
        0406   25      07 040F        BCS    ZF40F
        0408   4F                     CLRA               
        0409   5F                     CLRB               

        040A   A7 8B           ZF40A  STA    D,X
        040C   5C                     INCB               
        040D   26      FB 040A        BNE    ZF40A

        040F   39              ZF40F  RTS                

        0410   34      50      ZF410  PSHS   U,X
        0412   4F                     CLRA               

        0413   34      02      ZF413  PSHS   A
        0415   5F                     CLRB               

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    15
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0416   A6 86                  LDA    A,X
        0418   27      0B 0425        BEQ    ZF425
        041A   1F      02             TFR    D,Y
        041C   4F                     CLRA               

        041D   6D AB           ZF41D  TST    D,Y
        041F   27      06 0427        BEQ    ZF427
        0421   CB      40             ADDB   #$40
        0423   24      F8 041D        BCC    ZF41D

        0425   1A      01      ZF425  ORCC   #$01

        0427   31 AB           ZF427  LEAY   D,Y
        0429   35      02             PULS   A
        042B   24      25 0452        BCC    ZF452
        042D   4C                     INCA               
        042E   81      40             CMPA   #$40
        0430   25      E1 0413        BCS    ZF413
        0432   4F                     CLRA               

        0433   6D 86           ZF433  TST    A,X
        0435   27      0A 0441        BEQ    ZF441
        0437   4C                     INCA               
        0438   81      40             CMPA   #$40
        043A   25      F7 0433        BCS    ZF433
        043C   C6      C8             LDB    #$C8
        043E   43                     COMA               
        043F   20      1E 045F        BRA    ZF45F

        0441   34      12      ZF441  PSHS   X,A
        0443   8D      B5 03FA        BSR    ZF3FA
        0445   25      1A 0461        BCS    ZF461
        0447   31 84                  LEAY   ,X
        0449   1F      10             TFR    X,D
        044B   1F      89             TFR    A,B
        044D   35      12             PULS   X,A
        044F   E7 86                  STB    A,X
        0451   5F                     CLRB               

        0452   58              ZF452  ASLB               
        0453   49                     ROLA               
        0454   58                     ASLB               
        0455   49                     ROLA               
        0456   C6      3F             LDB    #$3F

        0458   6F A5           ZF458  CLR    B,Y
        045A   5A                     DECB               
        045B   26      FB 0458        BNE    ZF458
        045D   A7 A4                  STA    ,Y

        045F   35      D0      ZF45F  PULS   PC,U,X

        0461   32 63           ZF461  LEAS   $03,S
        0463   35      D0             PULS   PC,U,X

        0465   A6 41           ZF465  LDA    $01,U
        0467   AE 44                  LDX    $04,U

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    16
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0469   34      76             PSHS   U,Y,X,B,A
        046B   5F                     CLRB               
        046C   44                     LSRA               
        046D   56                     RORB               
        046E   44                     LSRA               
        046F   56                     RORB               
        0470   34      02             PSHS   A
        0472   A6 86                  LDA    A,X
        0474   27      18 048E        BEQ    ZF48E
        0476   1F      02             TFR    D,Y
        0478   6F A4                  CLR    ,Y
        047A   5F                     CLRB               
        047B   1F      03             TFR    D,U
        047D   4F                     CLRA               

        047E   6D CB           ZF47E  TST    D,U
        0480   26      0C 048E        BNE    ZF48E
        0482   CB      40             ADDB   #$40
        0484   26      F8 047E        BNE    ZF47E
        0486   4C                     INCA               
        0487 103F                     SWI2               
      C 0489 29                       FCB    $29
        048A   A6 E4                  LDA    ,S
        048C   6F 86                  CLR    A,X

        048E   6F E0           ZF48E  CLR    ,S+
        0490   35      F6             PULS   PC,U,Y,X,B,A

      C 0492 49 4F 4D 41       ZF492  FCS    "IOMAN"
        0496 CE
        0497   34      76      ZF497  PSHS   U,Y,X,B,A
        0499   DE      2A             LDU    Z002A
        049B   8D      14 04B1        BSR    ZF4B1
        049D   24      08 04A7        BCC    ZF4A7
        049F   8D      19 04BA        BSR    ZF4BB
        04A1   25      0C 04AF        BCS    ZF4AF
        04A3   8D      0C 04B1        BSR    ZF4B1
        04A5   25      08 04AF        BCS    ZF4AF

        04A7   AD A4           ZF4A7  JSR    ,Y
        04A9   35      76             PULS   U,Y,X,B,A
        04AB   AE 3E                  LDX    -$02,Y
        04AD   6E 84                  JMP    ,X

        04AF   35      F6      ZF4AF  PULS   PC,U,Y,X,B,A

        04B1   30 8C   DE 0492 ZF4B1  LEAX   ZF492,PCR
        04B4   86      C1             LDA    #$C1
        04B6 103F                     SWI2               
      C 04B8 00                       FCB    $00
        04B9   39                     RTS                

        04BA   34      40      ZF4BB  PSHS   U
        04BC   53                     COMB               
        04BD   0D      73             TST    Z0073
        04BF   26      35 04F6        BNE    ZF4F7
        04C1   0C      73             INC    Z0073

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    17
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        04C3   EC C8   14             LDD    $14,U
        04C6   27      2E 04F6        BEQ    ZF4F7
        04C8   30 CB                  LEAX   D,U
        04CA   86      C1             LDA    #$C1
        04CC 103F                     SWI2               
      C 04CE 00                       FCB    $00
        04CF   25      25 04F6        BCS    ZF4F7
        04D1   AD A4                  JSR    ,Y
        04D3   25      21 04F6        BCS    ZF4F7
        04D5   9F      24             STX    Z0024
        04D7   9F      66             STX    Z0066
        04D9   33 8B                  LEAU   D,X
        04DB   DF      68             STU    Z0068

        04DD   EC 84           ZF4DE  LDD    ,X
        04DF 1083    87CD             CMPD   #$87CD
        04E3   26      0B 04F0        BNE    ZF4F1
        04E5 103F                     SWI2               
      C 04E7 2E                       FCB    $2E
        04E8   25      06 04F0        BCS    ZF4F1
        04EA   EC 02                  LDD    $02,X
        04EC   30 8B                  LEAX   D,X
        04EE   20      02 04F2        BRA    ZF4F3

        04F0   30 01           ZF4F1  LEAX   $01,X

        04F2   9C      68      ZF4F3  CMPX   Z0068
        04F4   25      E7 04DD        BCS    ZF4DE

        04F6   35      C0      ZF4F7  PULS   PC,U

      S 04F8   70    6E0E             emod               

      E 04FB                   ZF4FC  equ    *

      S 0000 87 CD 00 2E              mod    ZF52A,ZF512,sys,reent+1
        0004 00 16 C0 81 CC

      C 0009 00                ZF405  FCB    $00
      C 000A E000                     FDB    $E000
      C 000C 0C                       FCB    12
      C 000D 0C                       FCB    12
      C 000E 001A                     FDB    ZF51A
      C 0010 001F                     FDB    ZF51F
      C 0012 0022                     FDB    ZF522
      C 0014 0027                     FDB    ZF527

      C 0016 49 6E 69 F4       ZF512  FCS    "Init"
      C 001A 53 79 73 47       ZF51A  FCS    "SysGo"
        001E EF
      C 001F 2F 44 B0          ZF51F  FCS    "/D0"
      C 0022 2F 54 65 72       ZF522  FCS    "/Term"
        0026 ED
      C 0027 42 6F 6F F4       ZF527  FCS    "Boot"

      S 002B   16    2780             emod               


OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    18
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

      E 002E                   ZF52A  equ    *

      S 0000 87 CD 01 B9              mod    ZF6E3,ZF537,sys+objct,reent+1,ZF53D,18
        0004 00 0D C1 81 40 00 13 00 12

      C 000D 42 6F 6F F4       ZF537  FCS    "Boot"
      C 0011 00                       FCB    $00
      C 0012 00                ZF53C  FCB    $00

        0013   4F              ZF53D  CLRA               
        0014   C6      12             LDB    #18

        0016   34      02      ZF540  PSHS   A
        0018   5A                     DECB               
        0019   26      FB 0016        BNE    ZF540
        001B   1F      43             TFR    S,U
        001D   8E    E014             LDX    #ZE014
        0020   AF C4                  STX    ,U
        0022   30 04                  LEAX   $04,X
        0024   AF 42                  STX    $02,U
        0026   86      D0             LDA    #$D0        
        0028   A7 84                  STA    ,X
        002A   17    0181 01AE        LBSR   ZF6D8
        002D   A6 84                  LDA    ,X
        002F   30 01                  LEAX   $01,X
        0031   AF 44                  STX    $04,U
        0033   30 01                  LEAX   $01,X
        0035   AF 46                  STX    $06,U
        0037   30 01                  LEAX   $01,X
        0039   AF 48                  STX    $08,U
        003B   86      FF             LDA    #$FF
        003D   A7 4F                  STA    $0F,U
        003F   34      56             PSHS   U,X,B,A
        0041   4F                     CLRA               
        0042   5F                     CLRB               
        0043 108E    0001             LDY    #$0001
        0047   9E      20             LDX    Z0020
        0049   DE      22             LDU    Z0022
        004B 103F                     SWI2               
      C 004D 12                       FCB    $12
        004E   25      41 0091        BCS    ZF5BB
        0050   1E      89             EXG    A,B
        0052   EE 64                  LDU    $04,S
        0054   ED 4D                  STD    $0D,U
        0056   5F                     CLRB               
        0057   8E    0000             LDX    #$0000
        005A   8D      4C 00A8        BSR    ZF5D2
        005C   25      33 0091        BCS    ZF5BB
        005E   EC A8   18             LDD    $18,Y
        0061   ED E4                  STD    ,S
        0063 103F                     SWI2               
      C 0065 28                       FCB    $28
        0066   25      29 0091        BCS    ZF5BB
        0068   EF 62                  STU    $02,S
        006A   EE 64                  LDU    $04,S
        006C   AE 62                  LDX    $02,S
        006E   AF 4D                  STX    $0D,U

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    19
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0070   AE A8   16             LDX    $16,Y
        0073   EC A8   18             LDD    $18,Y
        0076   27      12 008A        BEQ    ZF5B4
                                                         
        0078   34      16      ZF5A2  PSHS   X,B,A
        007A   5F                     CLRB               
        007B   8D      2B 00A8        BSR    ZF5D2
        007D   25      10 008F        BCS    ZF5B9
        007F   35      16             PULS   X,B,A
        0081   6C 4D                  INC    $0D,U
        0083   30 01                  LEAX   $01,X
        0085   83    0100             SUBD   #$0100
        0088   22      EE 0078        BHI    ZF5A2

        008A   4F              ZF5B4  CLRA               
        008B   35      06             PULS   B,A
        008D   20      04 0093        BRA    ZF5BD

        008F   32 64           ZF5B9  LEAS   $04,S

        0091   32 62           ZF5BB  LEAS   $02,S

        0093   35      50      ZF5BD  PULS   U,X
        0095   32 E8   12             LEAS   $12,S
        0098   39                     RTS                

        0099   6F C8   10      ZF5C3  CLR    $10,U
        009C   6F 4F                  CLR    $0F,U
        009E   C6      4B             LDB    #$4B
        00A0   17    00F1 0194        LBSR   ZF6BE
        00A3   C6      0B             LDB    #$0B
        00A5   16    00EC 0194        LBRA   ZF6BE

        00A8   86      91      ZF5D2  LDA    #$91
        00AA   8C    0000             CMPX   #$0000
        00AD   26      11 00C0        BNE    ZF5EA
        00AF   8D      0F 00C0        BSR    ZF5EA
        00B1   25      04 00B7        BCS    ZF5E1
        00B3 10AE 4D                  LDY    $0D,U
        00B6   5F                     CLRB               

        00B7   39              ZF5E1  RTS                

        00B8   24      06 00C0 ZF5E2  BCC    ZF5EA
        00BA   34      16             PSHS   X,B,A
        00BC   8D      DB 0099        BSR    ZF5C3
        00BE   35      16             PULS   X,B,A

        00C0   34      16      ZF5EA  PSHS   X,B,A
        00C2   8D      07 00CB        BSR    ZF5F5
        00C4   35      16             PULS   X,B,A
        00C6   24      EF 00B7        BCC    ZF5E1
        00C8   44                     LSRA               
        00C9   26      ED 00B8        BNE    ZF5E2

        00CB   8D      3A 0107 ZF5F5  BSR    ZF631
        00CD   25      E8 00B7        BCS    ZF5E1

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    20
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        00CF   AE 4D                  LDX    $0D,U
        00D1   1A      50             ORCC   #$50
        00D3   C6      88             LDB    #$88
        00D5   EA C8   11             ORB    $11,U
        00D8   17    00C7 01A2        LBSR   ZF6CC
        00DB   34      60             PSHS   U,Y
        00DD 10AE 42                  LDY    $02,U
        00E0   31 3C                  LEAY   -$04,Y
        00E2   EE 48                  LDU    $08,U

        00E4   A6 A4           ZF60E  LDA    ,Y
        00E6   2B      04 00EC        BMI    ZF616
        00E8   27      FA 00E4        BEQ    ZF60E
        00EA   20      06 00F2        BRA    ZF61C

        00EC   A6 C4           ZF616  LDA    ,U
        00EE   A7 80                  STA    ,X+
        00F0   20      F2 00E4        BRA    ZF60E

        00F2   EE 62           ZF61C  LDU    $02,S
        00F4   17    00A3 019A        LBSR   ZF6C4
        00F7   35      60             PULS   U,Y
        00F9   C5      04             BITB   #$04
        00FB   26      02 00FF        BNE    ZF629
        00FD   20      7B 017A        BRA    ZF6A4

        00FF   53              ZF629  COMB               
        0100   C6      F4             LDB    #$F4
        0102   39                     RTS                

        0103   53              ZF62D  COMB               
        0104   C6      F1             LDB    #$F1
        0106   39                     RTS                

        0107   6F C8   10      ZF631  CLR    $10,U
        010A   6F 4B                  CLR    $0B,U
        010C   1F      10             TFR    X,D
        010E 1083    0000             CMPD   #$0000
        0112   27      40 0154        BEQ    ZF67E
        0114 10A3 21                  CMPD   $01,Y
        0117   24      EA 0103        BCC    ZF62D
        0119   83    000A             SUBD   #$000A
        011C   24      05 0123        BCC    ZF64D
        011E   C3    000A             ADDD   #$000A
        0121   20      31 0154        BRA    ZF67E

        0123   E7 4C           ZF64D  STB    $0C,U
        0125   5F                     CLRB               
        0126   34      04             PSHS   B
        0128   E6 A8   10             LDB    $10,Y
        012B   54                     LSRB               
        012C   E6 4C                  LDB    $0C,U
        012E   24      0E 013E        BCC    ZF668

        0130   63 4B           ZF65A  COM    $0B,U
        0132   26      02 0136        BNE    ZF660
        0134   6C E4                  INC    ,S

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    21
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++


        0136   E0 23           ZF660  SUBB   $03,Y
        0138   82      00             SBCA   #$00
        013A   24      F4 0130        BCC    ZF65A
        013C   20      08 0146        BRA    ZF670

        013E   6C E4           ZF668  INC    ,S
        0140   E0 23                  SUBB   $03,Y
        0142   82      00             SBCA   #$00
        0144   24      F8 013E        BCC    ZF668

        0146   A6 A8   10      ZF670  LDA    $10,Y
        0149   84      02             ANDA   #$02
        014B   27      03 0150        BEQ    ZF67A
        014D   A7 C8   11             STA    $11,U

        0150   35      02      ZF67A  PULS   A
        0152   EB 23                  ADDB   $03,Y

        0154   E7 D8   06      ZF67E  STB    [$06,U]
        0157   5F                     CLRB               
        0158   E6 4B                  LDB    $0B,U
        015A   C4      40             ANDB   #$40
        015C   EA C8   10             ORB    $10,U
        015F   E7 C8   10             STB    $10,U
        0162   E6 4F                  LDB    $0F,U
        0164   E7 D8   04             STB    [$04,U]
        0167   A1 4F                  CMPA   $0F,U
        0169   27      0D 0178        BEQ    ZF6A2
        016B   A7 4F                  STA    $0F,U
        016D   A7 D8   08             STA    [$08,U]
        0170   C6      1B             LDB    #$1B
        0172   8D      20 0194        BSR    ZF6BE
        0174   86      04             LDA    #$04
        0176   A7 4A                  STA    $0A,U

        0178   5F              ZF6A2  CLRB               
        0179   39                     RTS                

        017A   C5      80      ZF6A4  BITB   #$80
        017C   26      0A 0188        BNE    ZF6B2
        017E   C5      10             BITB   #$10
        0180   26      0A 018C        BNE    ZF6B6
        0182   C5      08             BITB   #$08
        0184   26      0A 0190        BNE    ZF6BA
        0186   5F                     CLRB               
        0187   39                     RTS                

        0188   53              ZF6B2  COMB               
        0189   C6      F6             LDB    #$F6
        018B   39                     RTS                

        018C   53              ZF6B6  COMB               
        018D   C6      F7             LDB    #$F7
        018F   39                     RTS                

        0190   53              ZF6BA  COMB               

OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    22
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++

        0191   C6      F3             LDB    #$F3
        0193   39                     RTS                

        0194   E8 8D FE7A 0012 ZF6BE  EORB   ZF53C,PCR
        0198   8D      08 01A2        BSR    ZF6CC

        019A   E6 D8   02      ZF6C4  LDB    [$02,U]
        019D   C5      01             BITB   #$01
        019F   26      F9 019A        BNE    ZF6C4
        01A1   39                     RTS                

        01A2   A6 C8   10      ZF6CC  LDA    $10,U
        01A5   A7 D4                  STA    [,U]
        01A7   EA 4A                  ORB    $0A,U
        01A9   6F 4A                  CLR    $0A,U
        01AB   E7 D8   02             STB    [$02,U]

        01AE   8D      00 01B0 ZF6D8  BSR    ZF6DA
        01B0   8D      00 01B2 ZF6DA  BSR    ZF6DC
        01B2   8D      00 01B4 ZF6DC  BSR    ZF6DE
        01B4   12              ZF6DE  NOP                
        01B5   39                     RTS                

      S 01B6   A0    C02E             emod               

      E 01B9                   ZF6E3  equ    *

                                      END                


                 ERRORS :  NONE
               WARNINGS :     1
         PHASING OFFSET :  NONE 
                 LABELS :   318
   LAST PROGRAM ADDRESS :   440  $01B8
   LAST STORAGE ADDRESS :     0  $0000
          PROGRAM BYTES :  1762  $06E2
          STORAGE BYTES :     0  $0000


OS9P2.TXT                                                                                           LLOYD I/O ASSEMBLER   PAGE    23
                                                                                                    7-4-97          
++++++++ OSM    V5.2   (C) 1984 by LLOYD I/O, All Rights Reserved ++++++++



   SYMBOL TABLE:

0030 E F$A64    0013 E F$ABIT   003A E F$ALLI   004B E F$ALLP   0039 E F$ALLR   003F E F$ALLT   002C E F$APRC   0046 E F$AXY    
0047 E F$AXYP   0035 E F$BOOT   0036 E F$BTME   0005 E F$CHAN   0011 E F$CNAM   001B E F$CPYM   0017 E F$CRC    0044 E F$DATL   
0045 E F$DATT   0014 E F$DBIT   003B E F$DELI   004C E F$DELP   0040 E F$DELT   0048 E F$DXY    004D E F$ELIN   0006 E F$EXIT   
002F E F$F64    004E E F$FMOD   0003 E F$FORK   003E E F$FREH   003D E F$FREL   0019 E F$GBLK   001A E F$GMOD   0018 E F$GPRD   
0037 E F$GPRO   0009 E F$ICPT   000C E F$ID     0033 E F$IODL   002B E F$IOQU   002A E F$IRQ    0049 E F$LDAB   0000 E F$LINK   
0001 E F$LOAD   0007 E F$MEM    0038 E F$MOVE   002D E F$NPRC   000F E F$PERR   0010 E F$PNAM   0031 E F$R64    0043 E F$RELT   
0042 E F$REST   0012 E F$SBIT   0008 E F$SEND   003C E F$SETI   0041 E F$SETT   000A E F$SLEP   0034 E F$SLIN   000D E F$SPRI   
0028 E F$SRQM   0029 E F$SRTM   0032 E F$SSVC   000E E F$SSWI   004A E F$STAB   0016 E F$STIM   0015 E F$TIME   0002 E F$UNLK   
001D E F$UNLO   001C E F$USER   002E E F$VMOD   0004 E F$WAIT   0080 E I$ATCH   0086 E I$CDIR   008F E I$CLOS   0083 E I$CREA   
0090 E I$DELX   0087 E I$DLET   0081 E I$DTCH   0082 E I$DUP    008D E I$GSTT   0085 E I$MDIR   0084 E I$OPEN   008B E I$RDLN   
0089 E I$READ   0088 E I$SEEK   008E E I$SSTT   008A E I$WRIT   008C E I$WRLN   87CD E MODHD    0001 E objct    0080 E ODIR     
0004 E OEXEC    0020 E OPEXEC   0008 E OPREAD   0010 E OPWRIT   0001 E ORDONL   0040 E OSHARE   0003 E OUPDAT   0002 E OWRONL   
F800 E P1base   F000 E P2base   0080 E reent    0002 E stderr   0000 E stdin    0001 E stdout   00C0 E sys      0001 E Z0001    
000D E Z000D    0012 E Z0012    0013 E Z0013    0016 E Z0016    0020 E Z0020    0022 E Z0022    0024 E Z0024    0026 E Z0026    
0028 E Z0028    002A E Z002A    002C E Z002C    002E E Z002E    0030 E Z0030    0032 E Z0032    0034 E Z0034    0036 E Z0036    
0038 E Z0038    003A E Z003A    003C E Z003C    003E E Z003E    003F E Z003F    0040 E Z0040    0041 E Z0041    0042 E Z0042    
0043 E Z0043    0044 E Z0044    0046 E Z0046    0048 E Z0048    0049 E Z0049    004B E Z004B    004D E Z004D    004F E Z004F    
0051 E Z0051    0053 E Z0053    0055 E Z0055    0057 E Z0057    005B E Z005B    0066 E Z0066    0068 E Z0068    0073 E Z0073    
0800 E Z0800    E014 E ZE014    000D C ZF00D    0013 C ZF013    0016 C ZF016    0019 C ZF019    001C C ZF01C    001F C ZF01F    
0022 C ZF022    0025 C ZF025    0028 C ZF028    002B C ZF02B    002E C ZF02E    0031 C ZF031    0034 C ZF034    0037 C ZF037    
003A C ZF03A    003D C ZF03D    0040 C ZF040    0041 L ZF041    0069 L ZF06A    0072 L ZF073    0080 L ZF081    0084 L ZF085    
0091 L ZF092    0092 L ZF093    00B0 L ZF0B1    00B1 L ZF0B2    00B7 L ZF0B8    00C4 L ZF0C5    00CD L ZF0CE    00E4 L ZF0E5    
00F8 L ZF0F9    00F9 L ZF0FA    00FA L ZF0FB    0107 L ZF108    0123 L ZF124    0125 L ZF126    0134 L ZF135    0137 L ZF138    
0148 L ZF149    0154 L ZF155    015F L ZF160    0179 L ZF17A    0189 L ZF18A    018B L ZF18C    019F L ZF1A0    01A3 L ZF1A4    
01B1 L ZF1B2    01C1 L ZF1C2    01C6 L ZF1C7    01E0 L ZF1E1    01F5 L ZF1F6    0206 L ZF207    0216 L ZF217    0224 L ZF225    
0226 L ZF227    0230 L ZF231    0235 L ZF236    023C L ZF23D    0241 L ZF242    0249 L ZF24A    024E L ZF24F    0258 L ZF259    
0266 L ZF267    0273 L ZF274    027B L ZF27C    02A1 L ZF2A2    02AA L ZF2AB    02B4 L ZF2B5    02C1 L ZF2C2    02C4 L ZF2C5    
02C7 L ZF2C8    02D6 L ZF2D7    02DB L ZF2DC    02EB L ZF2EC    0303 L ZF304    0327 L ZF328    0330 L ZF331    033A L ZF33B    
034F L ZF34F    0355 L ZF355    0363 L ZF363    037A L ZF37A    037E L ZF37E    038A L ZF38A    039C L ZF39C    03A0 C ZF3A0    
03A5 L ZF3A5    03C0 L ZF3C0    03C1 L ZF3C1    03CC L ZF3CC    03CD L ZF3CD    03E1 L ZF3E1    03E2 L ZF3E2    03E4 L ZF3E4    
03F0 L ZF3F0    03F9 L ZF3F9    03FA L ZF3FA    0009 C ZF405    040A L ZF40A    040F L ZF40F    0410 L ZF410    0413 L ZF413    
041D L ZF41D    0425 L ZF425    0427 L ZF427    0433 L ZF433    0441 L ZF441    0452 L ZF452    0458 L ZF458    045F L ZF45F    
0461 L ZF461    0465 L ZF465    047E L ZF47E    048E L ZF48E    0492 C ZF492    0497 L ZF497    04A7 L ZF4A7    04AF L ZF4AF    
04B1 L ZF4B1    04BA L ZF4BB    04DD L ZF4DE    04F0 L ZF4F1    04F2 L ZF4F3    04F6 L ZF4F7    04FB E ZF4FC    0016 C ZF512    
001A C ZF51A    001F C ZF51F    0022 C ZF522    0027 C ZF527    002E E ZF52A    000D C ZF537    0012 C ZF53C    0013 L ZF53D    
0016 L ZF540    0078 L ZF5A2    008A L ZF5B4    008F L ZF5B9    0091 L ZF5BB    0093 L ZF5BD    0099 L ZF5C3    00A8 L ZF5D2    
00B7 L ZF5E1    00B8 L ZF5E2    00C0 L ZF5EA    00CB L ZF5F5    00E4 L ZF60E    00EC L ZF616    00F2 L ZF61C    00FF L ZF629    
0103 L ZF62D    0107 L ZF631    0123 L ZF64D    0130 L ZF65A    0136 L ZF660    013E L ZF668    0146 L ZF670    0150 L ZF67A    
0154 L ZF67E    0178 L ZF6A2    017A L ZF6A4    0188 L ZF6B2    018C L ZF6B6    0190 L ZF6BA    0194 L ZF6BE    019A L ZF6C4    
01A2 L ZF6CC    01AE L ZF6D8    01B0 L ZF6DA    01B2 L ZF6DC    01B4 L ZF6DE    01B9 E ZF6E3    

+++